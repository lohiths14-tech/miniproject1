{% extends "base.html" %}

{% block title %}Assignments - AI Grading System{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2><i class="fas fa-tasks"></i> My Assignments</h2>
                <a href="/student-dashboard" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </a>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12">
            <div class="alert alert-info">
                <h5><i class="fas fa-info-circle"></i> Assignment System Ready</h5>
                <p class="mb-0">The assignment system is ready to receive assignments from your instructors. Check back regularly for new assignments!</p>
            </div>
        </div>
    </div>
    
    <!-- Sample Assignments -->
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-code"></i> Basic Python Programming</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Write a Python program that calculates the factorial of a given number.</p>
                    <div class="mb-3">
                        <small class="text-muted">
                            <i class="fas fa-calendar"></i> Due: Tomorrow<br>
                            <i class="fas fa-layer-group"></i> Difficulty: Easy<br>
                            <i class="fas fa-code"></i> Language: Python
                        </small>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-success" onclick="startAssignment('python-factorial')">
                            <i class="fas fa-play"></i> Start Assignment
                        </button>
                        <button class="btn btn-outline-info" onclick="viewDetails('python-factorial')">
                            <i class="fas fa-eye"></i> View Details
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="fas fa-sort"></i> Array Sorting Algorithm</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Implement a sorting algorithm to sort an array of integers in ascending order.</p>
                    <div class="mb-3">
                        <small class="text-muted">
                            <i class="fas fa-calendar"></i> Due: Next Week<br>
                            <i class="fas fa-layer-group"></i> Difficulty: Medium<br>
                            <i class="fas fa-code"></i> Language: Python
                        </small>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-success" onclick="startAssignment('array-sorting')">
                            <i class="fas fa-play"></i> Start Assignment
                        </button>
                        <button class="btn btn-outline-info" onclick="viewDetails('array-sorting')">
                            <i class="fas fa-eye"></i> View Details
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="fas fa-chart-bar"></i> Assignment Statistics</h5>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-md-3">
                            <h4 class="text-primary">2</h4>
                            <p class="text-muted">Total Assignments</p>
                        </div>
                        <div class="col-md-3">
                            <h4 class="text-warning">2</h4>
                            <p class="text-muted">Pending</p>
                        </div>
                        <div class="col-md-3">
                            <h4 class="text-success">0</h4>
                            <p class="text-muted">Completed</p>
                        </div>
                        <div class="col-md-3">
                            <h4 class="text-info">0%</h4>
                            <p class="text-muted">Average Score</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function startAssignment(assignmentId) {
    showAlert(`Starting assignment: ${assignmentId}. Opening code editor...`, 'success');
    
    setTimeout(function() {
        window.location.href = '/code-editor?assignment=' + assignmentId;
    }, 1500);
}

function viewDetails(assignmentId) {
    let details = '';
    
    if (assignmentId === 'python-factorial') {
        details = `
Assignment: Basic Python Programming

Description:
Write a Python program that calculates the factorial of a given number.

Requirements:
- Function should handle edge cases (0! = 1)
- Use recursion or iteration
- Input validation for negative numbers

Test Cases:
- factorial(5) should return 120
- factorial(0) should return 1  
- factorial(3) should return 6

Starter Code:
def factorial(n):
    # Your code here
    pass
        `;
    } else if (assignmentId === 'array-sorting') {
        details = `
Assignment: Array Sorting Algorithm

Description:
Implement a sorting algorithm to sort an array of integers in ascending order.

Requirements:
- Choose any sorting algorithm (bubble, selection, insertion, etc.)
- Handle empty arrays
- Time complexity should be reasonable

Test Cases:
- [5,3,8,1,9] should return [1,3,5,8,9]
- [1] should return [1]
- [9,8,7,6,5] should return [5,6,7,8,9]

Starter Code:
def sort_array(arr):
    # Your code here
    pass
        `;
    }
    
    alert(details);
}

function showAlert(message, type = 'info') {
    const alertHtml = `
        <div class="alert alert-${type} alert-dismissible fade show" role="alert">
            <i class="fas fa-info-circle"></i> ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    `;
    
    $('.container').prepend(alertHtml);
    
    setTimeout(function() {
        $('.alert:first').fadeOut(function() {
            $(this).remove();
        });
    }, 3000);
}
</script>
{% endblock %}