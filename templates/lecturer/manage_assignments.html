{% extends "base.html" %}

{% block title %}Manage Assignments - AI Grading System{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2><i class="fas fa-tasks"></i> Manage Assignments</h2>
                <a href="/lecturer-dashboard" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </a>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5><i class="fas fa-list"></i> Assignment Management</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <button class="btn btn-success" onclick="createNewAssignment()">
                                <i class="fas fa-plus"></i> Create New Assignment
                            </button>
                            <button class="btn btn-info" onclick="refreshAssignments()">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                        <div>
                            <select class="form-select" id="filterStatus" onchange="filterAssignments()">
                                <option value="all">All Assignments</option>
                                <option value="active">Active</option>
                                <option value="completed">Completed</option>
                                <option value="draft">Draft</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Assignment List -->
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th>Assignment</th>
                                    <th>Language</th>
                                    <th>Difficulty</th>
                                    <th>Deadline</th>
                                    <th>Submissions</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="assignmentsList">
                                <tr>
                                    <td>
                                        <strong>Hello World Program</strong><br>
                                        <small class="text-muted">Write a simple Hello World program</small>
                                    </td>
                                    <td><span class="badge bg-info">Python</span></td>
                                    <td><span class="badge bg-success">Easy</span></td>
                                    <td>2025-10-15</td>
                                    <td>
                                        <span class="badge bg-primary">5</span> submitted
                                    </td>
                                    <td><span class="badge bg-success">Active</span></td>
                                    <td>
                                        <div class="btn-group" role="group">
                                            <button class="btn btn-sm btn-outline-primary" onclick="editAssignment(1)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-info" onclick="viewSubmissions(1)">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="deleteAssignment(1)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>Array Manipulation</strong><br>
                                        <small class="text-muted">Implement array sorting and searching</small>
                                    </td>
                                    <td><span class="badge bg-warning">Java</span></td>
                                    <td><span class="badge bg-warning">Medium</span></td>
                                    <td>2025-10-20</td>
                                    <td>
                                        <span class="badge bg-primary">3</span> submitted
                                    </td>
                                    <td><span class="badge bg-success">Active</span></td>
                                    <td>
                                        <div class="btn-group" role="group">
                                            <button class="btn btn-sm btn-outline-primary" onclick="editAssignment(2)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-info" onclick="viewSubmissions(2)">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="deleteAssignment(2)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>Binary Tree Traversal</strong><br>
                                        <small class="text-muted">Implement different tree traversal methods</small>
                                    </td>
                                    <td><span class="badge bg-danger">C++</span></td>
                                    <td><span class="badge bg-danger">Hard</span></td>
                                    <td>2025-10-25</td>
                                    <td>
                                        <span class="badge bg-secondary">0</span> submitted
                                    </td>
                                    <td><span class="badge bg-warning">Draft</span></td>
                                    <td>
                                        <div class="btn-group" role="group">
                                            <button class="btn btn-sm btn-outline-primary" onclick="editAssignment(3)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-success" onclick="publishAssignment(3)">
                                                <i class="fas fa-share"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="deleteAssignment(3)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Assignment Statistics -->
    <div class="row mt-4">
        <div class="col-md-3">
            <div class="card bg-primary text-white">
                <div class="card-body">
                    <h4>3</h4>
                    <p>Total Assignments</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-success text-white">
                <div class="card-body">
                    <h4>2</h4>
                    <p>Active Assignments</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-warning text-white">
                <div class="card-body">
                    <h4>1</h4>
                    <p>Draft Assignments</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-info text-white">
                <div class="card-body">
                    <h4>8</h4>
                    <p>Total Submissions</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function createNewAssignment() {
    window.location.href = '/create-assignment';
}

function refreshAssignments() {
    showAlert('Refreshing assignments list...', 'info');
    setTimeout(() => {
        showAlert('Assignments refreshed successfully!', 'success');
    }, 1000);
}

function filterAssignments() {
    const filter = document.getElementById('filterStatus').value;
    showAlert(`Filtering assignments by: ${filter}`, 'info');
}

function editAssignment(id) {
    showAlert(`Editing assignment ${id}...`, 'info');
}

function viewSubmissions(id) {
    showAlert(`Viewing submissions for assignment ${id}...`, 'info');
}

function deleteAssignment(id) {
    if (confirm('Are you sure you want to delete this assignment?')) {
        showAlert(`Assignment ${id} deleted successfully!`, 'success');
    }
}

function publishAssignment(id) {
    if (confirm('Are you sure you want to publish this assignment?')) {
        showAlert(`Assignment ${id} published successfully!`, 'success');
    }
}

// Function to show alerts
function showAlert(message, type = 'info') {
    const alertHtml = `
        <div class="alert alert-${type} alert-dismissible fade show" role="alert">
            <i class="fas fa-info-circle"></i> ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    `;
    
    $('.container').prepend(alertHtml);
    
    setTimeout(function() {
        $('.alert:first').fadeOut(function() {
            $(this).remove();
        });
    }, 3000);
}
</script>
{% endblock %}